#!/usr/bin/env python
"""
Return the current version minus any pre-release suffix.

Useful to get the final/stable version when the previous pre-release has been blessed as
ready for publishing as final.
"""

import sys

import packaging
import setuptools_scm


def main():  # pylint: disable=missing-function-docstring
    version = packaging.version.parse(setuptools_scm.get_version())
    if not version.is_prerelease:
        raise ValueError(f"The current VCS version tag is not a pre-release: {version}")
    print(version.base_version)


main.__doc__ = __doc__


if __name__ == "__main__":
    sys.exit(main())
